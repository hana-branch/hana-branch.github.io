<!DOCTYPE html>
<html>
  <head>
    <title>INTENG Journey Test</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <!-- Styles --> 
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" integrity="sha512-8bHTC73gkZ7rZ7vpqUQThUDhqcNFyYi2xgDgPDHc+GXVGHXq+xPjynxIopALmOPqzo9JZj0k6OqqewdGO3EsrQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Bebas+Neue|Roboto&display=swap" rel="stylesheet">
    <style type="text/css">
      body {
        background-color: #fcfcfc;
        text-align: center;
        margin: auto;
      }
      .main.container {
        margin-top: 7em;
      }
      a {
        display: block;
      	font-size: 20px;
      	font-weight: bolder;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body data-new-gr-c-s-check-loaded="14.1063.0" data-gr-ext-installed="">
    <div class="ui main text container">
        <h2 class="ui header">INTENG Test</h2><br><br>
         <section class="test">
          <a class="XPromoPopupRpl__actionButton m-primary" href="https://reddit.app.link/?domain=www.reddit.com&geoip_country=US&user_agent=Mozilla%2F5.0%20(iPhone%3B%20CPU%20iPhone%20OS%2013_2_3%20like%20Mac%20OS%20X)%20AppleWebKit%2F605.1.15%20(KHTML%2C%20like%20Gecko)%20Version%2F13.0.3%20Mobile%2F15E148%20Safari%2F604.1&base_url=%2F&referrer_domain=&referrer_url=&language=&dnt=true&compact_view=true&adblock=true&session_id=mgfhjfhihenhmekfje&loid=0000000000vo8i2pvs&loid_created=1674494616000&reddaid=&utm_term=treatment_4%2Crpl_migration_only&utm_medium=mweb%2Cmweb&utm_source=xpromo%2Cxpromo&utm_name=mweb_xpromo_revamp_v3%2Cshredditmweb_xpromo_consolidation_rpl&campaign=mweb_xpromo_revamp_v3%2Cshredditmweb_xpromo_consolidation_rpl&channel=xpromo%2Cxpromo&feature=mweb%2Cmweb&keyword=treatment_4%2Crpl_migration_only&mweb_subreddit_ids=&%24og_redirect=https%3A%2F%2Fwww.reddit.com%2F&%24deeplink_path=%2F&%24android_deeplink_path=reddit%2F&mweb_loid=t2_vo8i2pvs&mweb_loid_created=1674494616000&mweb_user_id36=&mweb_user_name=&tags=app_selector_modal_xpromo_listing&utm_content=app_selector_modal_xpromo_listing" rel="nofollow">Open App</a>

          <a class="XPromoPopupRpl__actionButton m-primary" href="https://reddit.app.link/?domain=www.reddit.com&geoip_country=US&user_agent=Mozilla%2F5.0%20(iPhone%3B%20CPU%20iPhone%20OS%2013_2_3%20like%20Mac%20OS%20X)%20AppleWebKit%2F605.1.15%20(KHTML%2C%20like%20Gecko)%20Version%2F13.0.3%20Mobile%2F15E148%20Safari%2F604.1&base_url=%2F&referrer_domain=&referrer_url=&language=&dnt=true&compact_view=true&adblock=true&session_id=mgfhjfhihenhmekfje&loid=0000000000vo8i2pvs&loid_created=1674494616000&reddaid=&utm_term=treatment_4%2Crpl_migration_only&utm_medium=mweb%2Cmweb&utm_source=xpromo%2Cxpromo&utm_name=mweb_xpromo_revamp_v3%2Cshredditmweb_xpromo_consolidation_rpl&campaign=mweb_xpromo_revamp_v3%2Cshredditmweb_xpromo_consolidation_rpl&channel=xpromo%2Cxpromo&feature=mweb%2Cmweb&keyword=treatment_4%2Crpl_migration_only&mweb_subreddit_ids=&%24og_redirect=https%3A%2F%2Fwww.reddit.com%2F&%24deeplink_path=%2F&%24android_deeplink_path=reddit%2F&mweb_loid=t2_vo8i2pvs&mweb_loid_created=1674494616000&mweb_user_id36=&mweb_user_name=&tags=app_selector_modal_xpromo_listing&utm_content=app_selector_modal_xpromo_listing&%24uri_redirect_mode=2" rel="nofollow">Force Open App</a>

          <a href="https://reddit-alternate.app.link/?__branch_flow_type=viewapp&__branch_flow_id=1146133785209671843&domain=www.reddit.com&geoip_country=US&%24uri_redirect_mode=2&_t=1146133785209671842">https://reddit-alternate.app.link</a>

          <a class="XPromoPopupRpl__actionButton m-primary" href="reddit://" rel="nofollow">reddit://</a>

        </section>
    </div>
    <script type="text/javascript">
    // function validateProtocol(url){
    //    var parser = document.createElement("a");
    //    parser.href = url; 
    //    var protocol = parser.protocol.toLowerCase();
    //    if ([ "javascript:", "vbscript:", "data:", "ftp:", ":", " "].indexOf(protocol) < 0) {
    //       return url;}
    //    return null;
    // }

    // function isSafariBrowser() {
    //   var ua = navigator.userAgent;
    //   return !!/^((?!chrome|android|crios|fxios).)*safari/i.test(ua);
    // }

    // window.onload = function() {
    //   if (!isSafariBrowser()) {
    //     window.top.location = validateProtocol("reddit://open?_branch_referrer=H4sIAAAAAAAAAy3KwQqAIAwA0K%2FJo4J0CqSPiM4iTmqUbqyF9Pd16PzersrX5JwUAFSbmO2J7XAzUE3YQu%2Fd%2Fpapmq0Qcsx0N5UnrIsZ%2FHgLxq%2BglKyxEpTgX4eHGZdWAAAA&link_click_id=1146133785209671842");
    //     setTimeout(function timeout() {
    //       if (document.webkitHidden || document.hidden) {
    //         return; 
    //       } else {
    //         window.top.location = validateProtocol("https://apps.apple.com/app/id1064216828");
    //       }
    //     }, 250);
    //   } else {
    //     window.top.location = validateProtocol("https://apps.apple.com/app/id1064216828");
    //   }
    // };
function validateProtocol(url){
   var parser = document.createElement("a");
   parser.href = url; 
   var protocol = parser.protocol.toLowerCase();
   if ([ "javascript:", "vbscript:", "data:", "ftp:", ":", " "].indexOf(protocol) < 0) {
      return url;}
   return null;
}

    function isSafariBrowser(ua) {
      return !!/^((?!chrome|android|crios|fxios).)*safari/i.test(ua);
    }

    function isGreaterThanVersion(ua, v) {
      var match = /iPhone OS ([^ ]*)/i.exec(ua);
      if (match && match[1]) {
        try {
          var version = match[1].replace(/_/gi, '.');
          version = version.split('.');
          version = parseFloat(version[0] + '.' + version[1]);
          if (version >= v) {
            return true;
          }
        } catch (e) {
          return false;
        }
      }
      return false;
    }

    function isSafari12Dot3OrGreater() {
      var ua = navigator.userAgent;
      var isSafari = isSafariBrowser(ua);

      if (isSafari) {
        return isGreaterThanVersion(ua, 12.3);
      }

      return false;
    };
          window.onload = function() {
            window.top.location = validateProtocol("reddit://open?_branch_referrer=H4sIAAAAAAAAAy3KwQqAIAwA0K%2FJo4J0CqSPiM4iTmqUbqyF9Pd16PzersrX5JwUAFSbmO2J7XAzUE3YQu%2Fd%2Fpapmq0Qcsx0N5UnrIsZ%2FHgLxq%2BglKyxEpTgX4eHGZdWAAAA&link_click_id=1146487171913520123");
            setTimeout(function timeout() {
              if (document.webkitHidden || document.hidden) { return; };
              if (isSafari12Dot3OrGreater()) {
                if (window.confirm("Open in App Store?")) {
                  window.top.location = validateProtocol("https://reddit-alternate.app.link/?__branch_flow_type=viewapp&__branch_flow_id=1146487171913520124&domain=www.reddit.com&geoip_country=US&%24uri_redirect_mode=2&_t=1146487171913520123");
                }
              } else {
                console.log("NOT SAFARI")
                window.top.location = validateProtocol("https://reddit-alternate.app.link/?__branch_flow_type=viewapp&__branch_flow_id=1146487171913520124&domain=www.reddit.com&geoip_country=US&%24uri_redirect_mode=2&_t=1146487171913520123");
              }
            }, 250);
          };
    </script>
  </body>
</html>
